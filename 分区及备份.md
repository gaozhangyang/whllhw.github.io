---
title: 分区备份
date: '2016/11/16 10:37:59'
tags: ubuntu
abbrlink: 9138
---
> 简要记录下了fdisk,dd命令使用
> 虚拟机中演示命令，对分区操作一定小心谨慎！虽说可以恢复，但也很麻烦！

<!--more-->

## ssh安装
坑爹没安装ssh
```
sudo yum install openssh-server -y
```
- ![](http://i.imgur.com/xpZ0fVt.png)
## fdisk分区
- 对vda进行分区
```
fdisk /dev/vda
```
<!--more-->
- 如图：
- ![](http://i.imgur.com/rUSIzWB.png)
- ![](http://i.imgur.com/I14s6kf.png)
- 1.建立拓展分区vda4
- 2.再进行操作建立vda5，vda6
- 3.扇区选择默认，大小为+17G，+1G
- 已分区成功：
- ![](http://i.imgur.com/tHFuK0C.png)
- 重载分区表
```
partprobe
```
- 运行格式化
```
mkfs.ext3 /dev/vda5
```
- 运行格式化
```
mkfs.ext3 /dev/vda6
```
- ![](http://i.imgur.com/f2wl35p.png)
- 挂载vda6(先在/dev建立文件夹hdd1)：
```
mount /dev/vda6 hdd1
```
- ![](http://i.imgur.com/P7qPQeC.png)
## dd
```
cd /hdd1
dd if=/dev/zero of=0 count=1 bs=100 000 000
```
> if=/dev/zero 无限生成0
> of=输出为文件
> count*bs=文件大小(字节）

```
dd if=/dev/urandom of=1 count=10 bs=10 000 000
```
>/dev/urandom 生成随机字符

- ![](http://i.imgur.com/nTeakz5.png)
- 生成test.img
```
dd if=/dev/vda6 of=~/test.img
```
- 生成test.img.gz压缩包
```
dd if=/dev/vda6 | gzip >~/test.img.gz
```
- 将dd输出的数据导入到gzip 再重定向到test.img.gz
- ![](http://i.imgur.com/doGqQ8B.png)
